<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de Livro - NewStack</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

    <link href="/CSS/admMaster.css" rel="stylesheet">
    <link href="/CSS/form.css" rel="stylesheet">
    <script src="/JS/scriptRegisterBook.js" defer></script>

    <style>
        body { display: flex; flex-direction: column; min-height: 100vh; }
        .content-wrapper { flex: 1; display: flex; flex-direction: column; }
        main.register-page { flex: 1; display: flex; align-items: center; justify-content: center; }
        #quantExemplares { max-width: 140px; }
        #disponibilidade { padding: 0.7rem 1.2rem; border: 2px solid #2980b9; border-radius: 4px; font-size: 1.05rem; background: #fafdff; color: #222; box-shadow: 0 2px 8px rgba(44, 62, 80, 0.07); transition: border 0.2s, box-shadow 0.2s; outline: none; margin-top: 0.2rem; appearance: none; -webkit-appearance: none; -moz-appearance: none; background-image: url('data:image/svg+xml;utf8,<svg fill="%232980b9" height="20" viewBox="0 0 24 24" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/></svg>'); background-repeat: no-repeat; background-position: right 0.8rem center; background-size: 1.2rem; width: 160px; }
        #disponibilidade:focus { border: 2px solid #2c3e50; box-shadow: 0 4px 16px rgba(44, 62, 80, 0.13); background: #fff; }
        #disponibilidade option[value="true"] { color: #1e8c3a; font-weight: bold; }
        #disponibilidade option[value="false"] { color: #a90e0e; font-weight: bold; }
        .disponibilidade-indicador { display: inline-block; width: 18px; height: 18px; border-radius: 4px; margin-right: 0.5rem; vertical-align: middle; background: #1e8c3a; transition: background 0.2s; }
        .disponibilidade-indicador.nao { background: #a90e0e; }
        #btnMenos { background: #a90e0e !important; color: #fff; transition: background 0.2s, box-shadow 0.2s; }
        #btnMenos:hover { background: #7a0a0a !important; color: #fff; box-shadow: 0 2px 8px rgba(169, 14, 14, 0.18); }
        #quantExemplares::-webkit-outer-spin-button, #quantExemplares::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
        #quantExemplares[type=number] { -moz-appearance: textfield; }
        .image-preview { max-width: 200px; margin-top: 10px; border-radius: 8px; }
    </style>
</head>

<body>
<div class="content-wrapper">
    <header th:insert="~{fragments/header :: header}"></header>

    <main class="register-page">
        <div class="register-container">
            <h2>Cadastro de Livro</h2>
            <form class="register-form" id="RegisterLivro_Form" th:action="@{/books/register}" method="post">
                <div class="form-row">
                    <div class="input-group">
                        <label for="titulo">Título *</label>
                        <input type="text" id="titulo" name="title" required>
                    </div>
                    <div class="input-group">
                        <label for="autor">Autor</label>
                        <input type="text" id="autor" name="author">
                    </div>
                </div>
                <div class="form-row">
                    <div class="input-group">
                        <label for="isbn">ISBN *</label>    
                        <input type="text" id="isbn" name="ISBN" required>
                    </div>
                    <div class="input-group">
                        <label for="categoria">Categoria</label>
                        <input type="text" id="categoria" name="category">
                    </div>
                </div>
                <div class="form-row">
                    <div class="input-group">
                        <label for="quantExemplares">Quantidade de Exemplares *</label>
                        <div style="display: flex; align-items: center; gap: 0.5rem;">
                            <button type="button" id="btnMenos" style="width:32px;height:32px;border-radius:50%;border:none;font-size:1.2rem;cursor:pointer;">-</button>
                            <input type="number" id="quantExemplares" name="quantity" min="0" required style="max-width: 140px; text-align: center;" value="0">
                            <button type="button" id="btnMais" style="width:32px;height:32px;border-radius:50%;border:none;background:#197ec1;color:#fff;font-size:1.2rem;cursor:pointer;">+</button>
                        </div>
                    </div>
                    <div class="input-group">
                        <label for="disponibilidade">Disponibilidade *</label>
                        <div style="display: flex; align-items: center; gap: 0.5rem;">
                            <span id="indicadorDisp" class="disponibilidade-indicador"></span>
                            <select id="disponibilidade" name="availability" required>
                                <option value="true">Sim</option>
                                <option value="false">Não</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="input-group">
                    <label for="descricao">Descrição</label>
                    <textarea id="descricao" name="description" rows="3"></textarea>
                </div>
                <div class="input-group">
                    <label for="editora">Editora</label>
                    <input type="text" id="editora" name="publisher">
                </div>
                <div class="input-group">
                    <label>Imagem do livro:</label>
                    <div id="imglivro"></div>
                </div>

                <input type="hidden" id="thumbnailUrl" name="thumbnailUrl" />
                <input type="hidden" id="dataPublicacao" name="year_publication" />
                <input type="hidden" id="collectionId" name="collectionId" value="1" />
                <input type="hidden" id="employeeId" name="employeeId" value="1" />

                <div class="form-actions">
                    <a href="/books/reports" class="btn-secondary">Cancelar</a>
                    <button type="submit" class="submit-btn">Salvar</button>
                </div>
            </form>
        </div>
    </main>
</div>

<footer class="footer" style="background: #000; color: #fff; text-align: center; padding: 1.2rem 0; margin-top: 2rem; border-top: 1px solid #222;">
    <div class="footer-content">
        <div class="footer-info">
            <p>&copy; 2025 NewStack Library. Todos os direitos reservados.</p>
        </div>
    </div>
</footer>

<div id="alertaErro" class="alert alert-danger" role="alert" style="display:none; position: fixed; top: 30px; left: 50%; transform: translateX(-50%); z-index: 9999;">
    <p id="mensagemErro"></p>
    <button type="button" class="btn-close" onclick="fecharAlerta()"></button>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>